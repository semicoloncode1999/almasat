"use strict";(self.webpackChunkecommerce=self.webpackChunkecommerce||[]).push([[637],{637:(tt,m,l)=>{l.r(m),l.d(m,{ProductModule:()=>W});var p=l(6814),_=l(5290),b=l(5861),a=l(95),d=l(6387),t=l(4769),f=l(3566),h=l(2788),C=l(2425),x=l(9881);let Z=(()=>{class o{constructor(){this.arabicCurrencies=["\u0631\u064a\u0627\u0644 \u0633\u0639\u0648\u062f\u064a","\u062f\u0631\u0647\u0645 \u0625\u0645\u0627\u0631\u0627\u062a\u064a","\u062f\u064a\u0646\u0627\u0631 \u0643\u0648\u064a\u062a\u064a","\u062f\u064a\u0646\u0627\u0631 \u0628\u062d\u0631\u064a\u0646\u064a","\u0631\u064a\u0627\u0644 \u0639\u0645\u0627\u0646\u064a","\u0631\u064a\u0627\u0644 \u0642\u0637\u0631\u064a","\u064a\u0648\u0631\u0648","\u062f\u0648\u0644\u0627\u0631 \u0627\u0645\u0631\u064a\u0643\u064a"].sort(),this.englishCurrencies=["Saudi Riyal","Emirati Dirham","Egyptian Pound","Iraqi Dinar","Kuwaiti Dinar","Bahraini Dinar","Omani Rial","Qatari Riyal","Jordanian Dinar","Lebanese Pound","Syrian Pound","Yemeni Rial","Palestinian Shekel","Libyan Dinar","Tunisian Dinar","Algerian Dinar","Moroccan Dirham","Sudanese Pound","Mauritanian Ouguiya","Djiboutian Franc","Comorian Franc","Somali Shilling","Dollar","euro"].sort()}static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var g=l(6472);function P(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tr",8)(1,"th",9),t._uU(2),t.qZA(),t.TgZ(3,"td"),t._UZ(4,"img",10),t.qZA(),t.TgZ(5,"td"),t._uU(6),t.qZA(),t.TgZ(7,"td"),t._uU(8),t.qZA(),t.TgZ(9,"td")(10,"button",11),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return t.KtG(s.getItem(c))}),t._UZ(11,"i",12),t.qZA(),t.TgZ(12,"button",13),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return s.showItem(c),t.KtG(s.controlView="delete")}),t._UZ(13,"i",14),t.qZA(),t.TgZ(14,"button",15),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw(2);return s.showItem(c),t.KtG(s.controlView="showItem")}),t._UZ(15,"i",16),t.qZA()()()}if(2&o){const e=r.$implicit,n=r.index,i=t.oxw(2);t.xp6(2),t.Oqu(n+1+i.paginationSize*(i.paginationCurrentPage-1)),t.xp6(2),t.Q6J("src",e.images[0].img,t.LSH),t.xp6(2),t.Oqu(e.title),t.xp6(2),t.Oqu(e.category)}}const w=function(o,r){return{itemsPerPage:o,currentPage:r}};function y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"table",3)(1,"thead")(2,"tr")(3,"th",4),t._uU(4,"#"),t.qZA(),t.TgZ(5,"th",4),t._uU(6,"photo"),t.qZA(),t.TgZ(7,"th",4),t._uU(8,"title"),t.qZA(),t.TgZ(9,"th",4),t._uU(10,"category"),t.qZA(),t._UZ(11,"th",4),t.qZA()(),t.TgZ(12,"tbody"),t.YNc(13,P,16,4,"tr",5),t.ALo(14,"paginate"),t.TgZ(15,"div",6)(16,"pagination-controls",7),t.NdJ("pageChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.paginationCurrentPage=i)}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(13),t.Q6J("ngForOf",t.xi3(14,1,e.products,t.WLB(4,w,e.paginationSize,e.paginationCurrentPage)))}}function v(o,r){1&o&&t._UZ(0,"img",10),2&o&&t.Q6J("src",r.$implicit.img,t.LSH)}function O(o,r){if(1&o&&(t.TgZ(0,"span"),t._uU(1),t.qZA()),2&o){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function A(o,r){if(1&o&&(t.TgZ(0,"h4")(1,"b",23),t._uU(2," details "),t.YNc(3,O,2,1,"span",27),t.qZA(),t._uU(4),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(3),t.Q6J("ngIf",n.globalItem.details.length>1),t.xp6(1),t.hij(": ",e.details," ")}}function T(o,r){if(1&o&&(t.TgZ(0,"span",28),t._uU(1),t.qZA()),2&o){const e=t.oxw().index;t.xp6(1),t.hij(" ",e+1," ")}}function M(o,r){if(1&o&&(t.TgZ(0,"h4")(1,"span",28),t._uU(2,"price"),t.qZA(),t.YNc(3,T,2,1,"span",29),t._uU(4),t.qZA()),2&o){const e=r.$implicit,n=t.oxw(2);t.xp6(3),t.Q6J("ngIf",n.globalItem.prices.length>1),t.xp6(1),t.AsE(" : ",e.priceValue," ",e.countryCurrency," ")}}function I(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"button",30),t.NdJ("click",function(){t.CHM(e);const i=t.oxw(2);return t.KtG(i.deleteItem())}),t._uU(1,"delete "),t.qZA()}}function q(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",17)(1,"div",18)(2,"div",19),t.YNc(3,v,1,1,"img",20),t.qZA(),t.TgZ(4,"div",21)(5,"h1",22)(6,"b",23),t._uU(7,"title"),t.qZA(),t._uU(8),t.qZA(),t.TgZ(9,"h4")(10,"b",23),t._uU(11,"id"),t.qZA(),t._uU(12),t.qZA(),t.TgZ(13,"h4")(14,"b",23),t._uU(15,"category"),t.qZA(),t._uU(16),t.qZA(),t.YNc(17,A,5,2,"h4",24),t._UZ(18,"hr"),t.YNc(19,M,5,3,"h4",24),t._UZ(20,"hr"),t.TgZ(21,"h4")(22,"b",23),t._uU(23,"discount"),t.qZA(),t._uU(24),t.qZA(),t.TgZ(25,"h4")(26,"b",23),t._uU(27,"product Rate"),t.qZA(),t._uU(28),t.qZA(),t.TgZ(29,"h4")(30,"b",23),t._uU(31,"available"),t.qZA(),t._uU(32),t.qZA(),t.TgZ(33,"h4")(34,"b",23),t._uU(35,"show On Home"),t.qZA(),t._uU(36),t.qZA(),t.TgZ(37,"div",8),t.YNc(38,I,2,0,"button",25),t.qZA(),t.TgZ(39,"button",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.controlView="show")}),t.qZA()()()()}if(2&o){const e=t.oxw();t.xp6(3),t.Q6J("ngForOf",e.globalItem.images),t.xp6(5),t.hij(" : ",e.globalItem.title,""),t.xp6(4),t.hij(" : ",e.globalItem.id,""),t.xp6(4),t.hij(" : ",e.globalItem.category,""),t.xp6(1),t.Q6J("ngForOf",e.globalItem.details),t.xp6(2),t.Q6J("ngForOf",e.globalItem.prices),t.xp6(5),t.hij(" : ",e.globalItem.discount,""),t.xp6(4),t.hij(" : ",e.globalItem.productRate,""),t.xp6(4),t.hij(" : ",e.globalItem.available,""),t.xp6(4),t.hij(" : ",e.globalItem.showOnHome,""),t.xp6(2),t.Q6J("ngIf","delete"==e.controlView)}}let U=(()=>{class o{constructor(e,n,i,c){this.uploadImagePromoServ=e,this.firestorage=n,this.dataServ=i,this.formBuilder=c,this.controlView="show",this.promoImages=[],this.products=[],this.categories=["ring","gemstone","rosary","other"],this.paginationSize=20,this.paginationCurrentPage=1,this.dataInputView="",this.sendProduct=new t.vpe,this.product=this.formBuilder.group({images:this.formBuilder.array([]),title:["",a.kI.required],category:["",a.kI.required],details:this.formBuilder.array([]),prices:this.formBuilder.array([]),available:[,a.kI.required]})}ngOnChanges(){this.controlView=this.dataInputView,this.products=this.dataServ.getProductsArray(this.dataInputView)}getItem(e){this.sendProduct.emit(e)}showItem(e){this.globalItem=e}deleteItem(){let e=this.globalItem.images;this.dataServ.deleteItem(this.globalItem);for(const n of e)this.firestorage.refFromURL(n.img).delete()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(f.N),t.Y36(h.Q1),t.Y36(x.D),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-view-edit-prods"]],inputs:{dataInputView:"dataInputView"},outputs:{sendProduct:"sendProduct"},features:[t.TTD],decls:3,vars:2,consts:[[1,"col-12","position-relative"],["class","table text-center",4,"ngIf"],["class","pre-delete",4,"ngIf"],[1,"table","text-center"],["scope","col"],["class","text-center",4,"ngFor","ngForOf"],[1,"col-12","pagination-class"],[3,"pageChange"],[1,"text-center"],["scope","row"],["alt","",1,"image-product",3,"src"],[1,"btn","btn-warning",3,"click"],[1,"bi","bi-pencil-square"],[1,"btn","btn-danger",3,"click"],[1,"bi","bi-trash3"],[1,"btn","btn-primary",3,"click"],[1,"bi","bi-eye-fill"],[1,"pre-delete"],[1,"col-12","card","p-3"],[1,"d-flex","flex-wrap"],["alt","","class","image-product",3,"src",4,"ngFor","ngForOf"],[1,"product-details"],[1,"text-info"],[1,"text-capitalize"],[4,"ngFor","ngForOf"],["class","btn btn-danger m-2",3,"click",4,"ngIf"],[1,"btn","btn-close","m-2","position-absolute","top-right-0",3,"click"],[4,"ngIf"],[2,"font-weight","bold"],["style","font-weight: bold;",4,"ngIf"],[1,"btn","btn-danger","m-2",3,"click"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.YNc(1,y,17,7,"table",1),t.YNc(2,q,40,11,"div",2),t.qZA()),2&n&&(t.xp6(1),t.Q6J("ngIf","delete"!=i.controlView&&"showItem"!=i.controlView),t.xp6(1),t.Q6J("ngIf","delete"==i.controlView||"showItem"==i.controlView))},dependencies:[p.sg,p.O5,g.LS,g._s],styles:[".image-product[_ngcontent-%COMP%]{margin-right:30px}.pre-delete[_ngcontent-%COMP%]{top:-36px!important;align-items:baseline!important}.card[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{float:left}.btn-close[_ngcontent-%COMP%]{position:absolute!important;top:0;z-index:2;right:10px}",".buttons-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:15px;font-size:small}td[_ngcontent-%COMP%]{font-size:small}td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:5px;font-size:small!important}.image-product[_ngcontent-%COMP%]{width:90px!important;height:92px!important;border-radius:11px;margin:5px;padding:4px}td[_ngcontent-%COMP%]   .image-product[_ngcontent-%COMP%]:hover{position:relative;z-index:2;transform:scale(2.5)}.drop-container[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:column;justify-content:center;align-items:center;height:100px;padding:20px;border-radius:10px;border:2px dashed #b5a654;color:#444;cursor:pointer;transition:background .2s ease-in-out,border .2s ease-in-out;width:100%;position:relative;z-index:1}.drop-container[_ngcontent-%COMP%]:hover{background:#eee;border-color:#111}.drop-container[_ngcontent-%COMP%]:hover   .drop-title[_ngcontent-%COMP%]{color:#222}.drop-title[_ngcontent-%COMP%]{color:#444;font-size:20px;font-weight:700;text-align:center;transition:color .2s ease-in-out}.file-upload[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.loading-text[_ngcontent-%COMP%]{font-size:16px;text-transform:capitalize;display:block;margin-top:12px;margin-bottom:0;text-align:center;color:#daa520;animation-name:_ngcontent-%COMP%_loading;animation-iteration-count:infinite;animation-duration:2.5s;animation-timing-function:ease-out}.spinner-grow[_ngcontent-%COMP%]{--bs-spinner-width: 15px;--bs-spinner-height: 15px;--bs-spinner-animation-speed: 1s;margin-right:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], option[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.inputs-group[_ngcontent-%COMP%] > input.form-control[_ngcontent-%COMP%], .inputs-group[_ngcontent-%COMP%] > textarea.form-control[_ngcontent-%COMP%]{margin-top:17px}.inputs-group[_ngcontent-%COMP%]:first-of-type > input.form-control[_ngcontent-%COMP%], .inputs-group[_ngcontent-%COMP%]:first-of-type > textarea.form-control[_ngcontent-%COMP%]{margin-top:5px}.delete-image[_ngcontent-%COMP%]{position:absolute;top:-5px;right:5px;z-index:3;cursor:pointer}label[_ngcontent-%COMP%]{font-size:smaller;font-weight:500;text-transform:capitalize}.remove-form-item[_ngcontent-%COMP%]{position:absolute;top:34%;right:-24px;padding:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center}.add-form-item[_ngcontent-%COMP%]{padding:0;height:20px;width:20px;display:inline-flex;justify-content:center;align-items:center;margin-left:20px}@keyframes _ngcontent-%COMP%_loading{0%{opacity:1}25%{opacity:0}50%{opacity:1}750%{opacity:0}}",".pre-delete[_ngcontent-%COMP%]{background-color:#fff;height:88vh;width:100%;z-index:2;position:absolute;top:-5px;border-radius:6px;display:flex;justify-content:center;align-items:center;overflow:auto}.pre-delete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.image-product[_ngcontent-%COMP%]{margin:30px}.pre-delete[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]   img.image-product[_ngcontent-%COMP%]:hover{position:relative;z-index:2;transform:scale(2.5);margin:65px}iframe[_ngcontent-%COMP%]{border:0;height:275px;width:393px;border-radius:10px}td[_ngcontent-%COMP%]   iframe[_ngcontent-%COMP%]{height:183px;width:250px}.pagination-class[_ngcontent-%COMP%]{width:98%!important;position:absolute}"]})}return o})();function k(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"li")(1,"button",9),t.NdJ("click",function(){const c=t.CHM(e).$implicit,s=t.oxw();return t.KtG(s.controlView=c)}),t._uU(2),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(2),t.Oqu(e)}}function N(o,r){1&o&&(t.TgZ(0,"div",51),t._uU(1," you choose some images with a big size!,So they did't uploaded, please upload images with smaller size instead of them "),t._UZ(2,"br"),t.TgZ(3,"b"),t._uU(4,"note "),t.qZA(),t._uU(5,": max size is 1 MegaByte per image "),t.qZA())}function V(o,r){1&o&&(t.TgZ(0,"small",52)(1,"div",53)(2,"span",54),t._uU(3,"Loading..."),t.qZA()(),t._uU(4,"uploading..."),t.qZA())}function J(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",57),t._UZ(1,"img",58),t.TgZ(2,"span",59),t.NdJ("click",function(){const c=t.CHM(e).index,s=t.oxw(3);return t.KtG(s.del(c))}),t._UZ(3,"i",60),t.qZA()()}if(2&o){const e=r.$implicit;t.xp6(1),t.Q6J("src",e,t.LSH)}}function F(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",55),t.NdJ("cdkDropListDropped",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.drop(i))}),t.YNc(1,J,4,1,"div",56),t.qZA()}if(2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.promoImages)}}function z(o,r){if(1&o&&t._UZ(0,"input",61),2&o){const e=t.oxw(2);t.Q6J("readOnly","edit"==e.controlView)}}function D(o,r){if(1&o&&(t.TgZ(0,"option",64),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.Oqu(e)}}function Q(o,r){if(1&o&&(t.TgZ(0,"select",62),t.YNc(1,D,2,2,"option",63),t.qZA()),2&o){const e=t.oxw(2);t.xp6(1),t.Q6J("ngForOf",e.categories)}}function Y(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.removeDetail(i))}),t.TgZ(1,"span"),t._uU(2,"-"),t.qZA()()}}function E(o,r){if(1&o&&(t.TgZ(0,"div",65),t.ynx(1,66),t._UZ(2,"textarea",67),t.YNc(3,Y,3,0,"div",68),t.BQk(),t.qZA()),2&o){const e=r.index,n=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(2),t.Q6J("ngIf",n.detailsArray.length>0)}}function H(o,r){if(1&o&&(t.TgZ(0,"option",64),t._uU(1),t.qZA()),2&o){const e=r.$implicit;t.Q6J("value",e),t.xp6(1),t.hij(" ",e,"")}}function S(o,r){if(1&o&&(t.TgZ(0,"p",75),t._uU(1),t.qZA()),2&o){t.oxw();const e=t.MAs(3),n=t.MAs(5);t.xp6(1),t.AsE("",e.value," ",n.value,"")}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"div",69),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,c=t.oxw(2);return t.KtG(c.removePrice(i))}),t.TgZ(1,"span"),t._uU(2,"-"),t.qZA()()}}function B(o,r){if(1&o&&(t.TgZ(0,"div",65),t.ynx(1,66),t._UZ(2,"input",70,71),t.TgZ(4,"select",72,73),t.YNc(6,H,2,2,"option",63),t.qZA(),t.YNc(7,S,2,2,"p",74),t.YNc(8,j,3,0,"div",68),t.BQk(),t.qZA()),2&o){const e=r.index,n=t.oxw(2);t.xp6(1),t.Q6J("formGroupName",e),t.xp6(5),t.Q6J("ngForOf",n.countries),t.xp6(1),t.Q6J("ngIf","edit"!=n.controlView),t.xp6(1),t.Q6J("ngIf",n.priceArray.length>0)}}function L(o,r){if(1&o&&(t.TgZ(0,"button",76),t._uU(1,"Add product"),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("disabled",e.loadingMsg)}}function G(o,r){if(1&o&&(t.TgZ(0,"button",77),t._uU(1,"Edit product"),t.qZA()),2&o){const e=t.oxw(2);t.Q6J("disabled",e.loadingMsg)}}function K(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"form",10),t.NdJ("ngSubmit",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.submit())}),t.TgZ(1,"div",11)(2,"div")(3,"label",12)(4,"span",13),t._uU(5,"Drop files here "),t.TgZ(6,"span",14),t._uU(7,"or browse"),t.qZA()(),t.TgZ(8,"input",15),t.NdJ("change",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.uploadImg(i))}),t.qZA()()(),t.YNc(9,N,6,0,"div",16),t.YNc(10,V,5,0,"small",17),t.YNc(11,F,2,1,"div",18),t.qZA(),t.TgZ(12,"div",11)(13,"label",19),t._uU(14,"select category"),t.qZA(),t.YNc(15,z,1,1,"input",20),t.YNc(16,Q,2,1,"select",21),t.qZA(),t.TgZ(17,"div",11)(18,"label",22),t._uU(19,"Add product title"),t.qZA(),t._UZ(20,"input",23),t.qZA(),t.TgZ(21,"div",24)(22,"label",25),t._uU(23,"Add product details"),t.qZA(),t.TgZ(24,"span",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addFormDetails())}),t.TgZ(25,"span"),t._uU(26,"+"),t.qZA()(),t.YNc(27,E,4,2,"div",27),t.qZA(),t.TgZ(28,"div",28)(29,"label",25),t._uU(30,"Add product net price"),t.qZA(),t.TgZ(31,"div",26),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.addFormPrice())}),t.TgZ(32,"span"),t._uU(33,"+"),t.qZA()(),t.YNc(34,B,9,4,"div",27),t.qZA(),t.TgZ(35,"div",11)(36,"label",29),t._uU(37,"Add product discount percent form 100% : "),t.qZA(),t._UZ(38,"input",30),t.qZA(),t.TgZ(39,"div",11)(40,"label",31),t._uU(41,"product stars rate : "),t.qZA(),t.TgZ(42,"select",32)(43,"option",33),t._uU(44,"no rate"),t.qZA(),t.TgZ(45,"option",34),t._uU(46,"1"),t.qZA(),t.TgZ(47,"option",35),t._uU(48,"2"),t.qZA(),t.TgZ(49,"option",36),t._uU(50,"3"),t.qZA(),t.TgZ(51,"option",37),t._uU(52,"4"),t.qZA(),t.TgZ(53,"option",38),t._uU(54,"5"),t.qZA()()(),t.TgZ(55,"div",11)(56,"label"),t._uU(57,"Show it on the home page : "),t.qZA(),t._UZ(58,"br"),t.TgZ(59,"span")(60,"label",39),t._uU(61,"yes"),t.qZA(),t._UZ(62,"input",40),t.qZA(),t.TgZ(63,"span",41)(64,"label",42),t._uU(65,"no"),t.qZA(),t._UZ(66,"input",43),t.qZA()(),t.TgZ(67,"div",11)(68,"label"),t._uU(69,"available"),t.qZA(),t._UZ(70,"br"),t.TgZ(71,"span")(72,"label",44),t._uU(73,"yes"),t.qZA(),t._UZ(74,"input",45),t.qZA(),t.TgZ(75,"span",41)(76,"label",46),t._uU(77,"no"),t.qZA(),t._UZ(78,"input",47),t.qZA()(),t.TgZ(79,"div",48),t.YNc(80,L,2,1,"button",49),t.YNc(81,G,2,1,"button",50),t.qZA()()}if(2&o){const e=t.oxw();t.Q6J("formGroup",e.product),t.xp6(9),t.Q6J("ngIf",e.bigImages.length),t.xp6(1),t.Q6J("ngIf",e.loadingMsg),t.xp6(1),t.Q6J("ngIf",!e.loadingMsg),t.xp6(4),t.Q6J("ngIf","edit"==e.controlView),t.xp6(1),t.Q6J("ngIf","add"==e.controlView),t.xp6(11),t.Q6J("ngForOf",null==e.detailsArray?null:e.detailsArray.controls),t.xp6(7),t.Q6J("ngForOf",null==e.priceArray?null:e.priceArray.controls),t.xp6(46),t.Q6J("ngIf",e.promoImages.length&&"add"==e.controlView),t.xp6(1),t.Q6J("ngIf",e.promoImages.length&&"edit"==e.controlView)}}function R(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"app-view-edit-prods",78),t.NdJ("sendProduct",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.getItem(i))}),t.qZA()}if(2&o){const e=t.oxw();t.Q6J("dataInputView",e.controlView)}}const $=[{path:"",component:(()=>{class o{constructor(e,n,i,c,s,u){this.uploadImagePromoServ=e,this.firestorage=n,this.toastr=i,this.dataServ=c,this.countriesServ=s,this.formBuilder=u,this.controlView="add",this.promoImages=[],this.bigImages=[],this.imgFiles=[],this.globalProductKey="",this.loadingMsg="",this.countries=[],this.subscribtions=[],this.product=this.formBuilder.group({id:[(new Date).getTime()],images:this.formBuilder.array([],a.kI.minLength(1)),title:["",a.kI.required],category:["",a.kI.required],details:this.formBuilder.array([],a.kI.minLength(1)),prices:this.formBuilder.array([],a.kI.minLength(1)),discount:[0,[a.kI.required,a.kI.max(99),a.kI.min(0)]],productRate:["",a.kI.required],showOnHome:["false",a.kI.required],available:["true",a.kI.required]}),this.addFormDetails(),this.addFormPrice(),this.countries=s.arabicCurrencies,this.categories=c.productCategories}get imagesArray(){return this.product.get("images")}get detailsArray(){return this.product.get("details")}get priceArray(){return this.product.get("prices")}addFormDetails(){let e=this.formBuilder.group({details:["",a.kI.required]});this.detailsArray.push(e)}addFormPrice(){let e=this.formBuilder.group({priceValue:["",[a.kI.required,a.kI.min(0)]],countryCurrency:["",a.kI.required]});this.priceArray.push(e)}removeDetail(e){this.detailsArray.length>1&&this.detailsArray.removeAt(e)}removePrice(e){this.priceArray.length>1&&this.priceArray.removeAt(e)}resetData(){this.product.patchValue({id:(new Date).getTime(),title:"",category:"",discount:0,productRate:"",available:"true",showOnHome:"false"}),this.imgFiles=[],this.imagesArray.clear(),this.detailsArray.clear(),this.priceArray.clear(),this.addFormDetails(),this.addFormPrice(),this.promoImages=[],this.bigImages=[],this.controlView="add"}uploadImg(e){var n=this;return(0,b.Z)(function*(){if(n.bigImages=e.target.files.length?[]:n.bigImages,"uploading"!=n.loadingMsg){n.loadingMsg="uploading";for(const i of e.target.files)i.size/1024/1024>1?n.bigImages.push(i):n.imgFiles.push(i);if(n.imgFiles.length){for(const i of n.imgFiles){const c=`Images/${(new Date).getTime()}${i.name}`,u=yield(yield n.firestorage.upload(c,i)).ref.getDownloadURL();n.promoImages.push(u)}n.orderingProductImages()}n.loadingMsg="",n.imgFiles=[]}})()}drop(e){(0,d.bA)(this.promoImages,e.previousIndex,e.currentIndex),this.orderingProductImages()}orderingProductImages(){this.imagesArray.clear();for(const e of this.promoImages){let n=this.formBuilder.group({img:e});this.imagesArray.push(n)}}getItem(e){this.resetData(),this.controlView="edit",this.globalProduct=e,this.detailsArray.removeAt(0),this.priceArray.removeAt(0),this.product.patchValue({id:e.id,title:e.title,category:e.category,discount:e.discount,productRate:e.productRate,available:e.available,showOnHome:e.showOnHome});for(const n of e.images){let i=this.formBuilder.group({img:n.img});this.promoImages.push(n.img),this.imagesArray.push(i)}for(const n of e.details){let i=this.formBuilder.group({details:n.details});this.detailsArray.push(i)}for(const n of e.prices){let i=this.formBuilder.group({priceValue:n.priceValue,countryCurrency:n.countryCurrency});this.priceArray.push(i)}}submit(){this.product.valid&&this.checkProductFormValidation()?this.subscribtions.push("add"==this.controlView?this.dataServ.createOrder("",this.controlView,this.product.value).subscribe(()=>{this.resetData(),this.toastr.success("product uploaded successfully")}):this.dataServ.getProducts(this.globalProduct.category).subscribe(e=>{for(const n in e)if(this.globalProduct.id==e[n].id){this.subscribtions.push(this.dataServ.createOrder(n,this.controlView,this.product.value).subscribe(()=>{this.resetData()})),this.toastr.success("product updated successfully");break}})):this.toastr.error("check all product data entered correctly")}checkProductFormValidation(){for(const e of this.priceArray.value)if(!e.priceValue||!e.countryCurrency)return!1;for(const e of this.detailsArray.value)if(!e.details)return!1;return!0}del(e){this.firestorage.refFromURL(this.promoImages[e]).delete(),this.promoImages.splice(e,1),this.orderingProductImages()}ngOnDestroy(){for(const e of this.subscribtions)e.unsubscribe()}static#t=this.\u0275fac=function(n){return new(n||o)(t.Y36(f.N),t.Y36(h.Q1),t.Y36(C._W),t.Y36(x.D),t.Y36(Z),t.Y36(a.qu))};static#e=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-product"]],decls:11,vars:4,consts:[[1,"col-12"],[1,"d-flex","justify-content-end","buttons-group"],[1,"btn","btn-primary",3,"disabled","click"],[1,"dropdown"],["type","button","data-bs-toggle","dropdown","aria-expanded","false",1,"btn","btn-secondary","dropdown-toggle"],[1,"dropdown-menu"],[4,"ngFor","ngForOf"],["class","form m-4",3,"formGroup","ngSubmit",4,"ngIf"],[3,"dataInputView","sendProduct",4,"ngIf"],[1,"dropdown-item",3,"click"],[1,"form","m-4",3,"formGroup","ngSubmit"],[1,"form-group"],["for","images","id","dropcontainer",1,"drop-container"],[1,"drop-title"],[1,"text-info","text-decoration-underline"],["type","file","id","images","multiple","","accept","image/*","required","",1,"file-upload",3,"change"],["class","alert alert-warning text-center p-1 m-1",4,"ngIf"],["class","loading-text",4,"ngIf"],["cdkDropList","","cdkDropListOrientation","horizontal","class","example-list text-center",3,"cdkDropListDropped",4,"ngIf"],["for","category",1,"important"],["type","text","class","form-control","formControlName","category",3,"readOnly",4,"ngIf"],["name","category","id","category","class","form-select","formControlName","category",4,"ngIf"],["for","title",1,"important"],["type","text","id","title","placeholder","title","formControlName","title",1,"form-control"],["formArrayName","details",1,"form-group"],[1,"important"],[1,"btn","btn-primary","add-form-item",3,"click"],["class","inputs-group position-relative",4,"ngFor","ngForOf"],["formArrayName","prices",1,"form-group","mt-3"],["for","discount",1,"important"],["type","number","id","discount","placeholder","discount","formControlName","discount",1,"form-control"],["for","productRate",1,"important"],["name","productRate","id","productRate","formControlName","productRate",1,"form-select","productRate"],["value","no-rate"],["value","1"],["value","2"],["value","3"],["value","4"],["value","5"],["for","showOnHomeYes",1,"m-1","fs-6"],["type","radio","name","showOnHome","id","showOnHomeYes","formControlName","showOnHome","value","true","checked",""],[1,"m-3"],["for","showOnHomeNo",1,"m-1","fs-6"],["type","radio","name","showOnHome","id","showOnHomeNo","formControlName","showOnHome","value","false"],["for","categoryYes",1,"m-1","fs-6"],["type","radio","name","available","id","categoryYes","formControlName","available","value","true","checked",""],["for","categoryNo",1,"m-1","fs-6"],["type","radio","name","available","id","categoryNo","formControlName","available","value","false"],[1,"text-center","p-2"],["type","submit","class","btn btn-primary",3,"disabled",4,"ngIf"],["type","submit","class","btn btn-warning",3,"disabled",4,"ngIf"],[1,"alert","alert-warning","text-center","p-1","m-1"],[1,"loading-text"],["role","status",1,"spinner-grow"],[1,"visually-hidden"],["cdkDropList","","cdkDropListOrientation","horizontal",1,"example-list","text-center",3,"cdkDropListDropped"],["class","example-box","cdkDrag","",4,"ngFor","ngForOf"],["cdkDrag","",1,"example-box"],["alt","",1,"image-product",3,"src"],[1,"delete-image","text-danger",3,"click"],[1,"bi","bi-x-circle"],["type","text","formControlName","category",1,"form-control",3,"readOnly"],["name","category","id","category","formControlName","category",1,"form-select"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],[1,"inputs-group","position-relative"],[3,"formGroupName"],["type","text","placeholder","details","formControlName","details","rows","2",1,"form-control"],["class","btn btn-danger remove-form-item",3,"click",4,"ngIf"],[1,"btn","btn-danger","remove-form-item",3,"click"],["type","number","placeholder","price","formControlName","priceValue",1,"form-control","price-input"],["priceValue",""],["name","country","id","country","formControlName","countryCurrency",1,"form-select","country-input"],["countryCurrency",""],["class","price-show",4,"ngIf"],[1,"price-show"],["type","submit",1,"btn","btn-primary",3,"disabled"],["type","submit",1,"btn","btn-warning",3,"disabled"],[3,"dataInputView","sendProduct"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0)(1,"div",1)(2,"button",2),t.NdJ("click",function(){return i.controlView="add",i.resetData()}),t._uU(3,"add"),t.qZA(),t.TgZ(4,"div",3)(5,"button",4),t._uU(6," show data "),t.qZA(),t.TgZ(7,"ul",5),t.YNc(8,k,3,1,"li",6),t.qZA()()(),t.YNc(9,K,82,10,"form",7),t.YNc(10,R,1,1,"app-view-edit-prods",8),t.qZA()),2&n&&(t.xp6(2),t.Q6J("disabled","add"==i.controlView),t.xp6(6),t.Q6J("ngForOf",i.categories),t.xp6(1),t.Q6J("ngIf","add"==i.controlView||"edit"==i.controlView),t.xp6(1),t.Q6J("ngIf","add"!=i.controlView&&"edit"!=i.controlView))},dependencies:[p.sg,p.O5,a._Y,a.YN,a.Kr,a.Fj,a.wV,a.EJ,a._,a.JJ,a.JL,a.sg,a.u,a.x0,a.CE,d.Zt,d.Wj,U],styles:['.price-input[_ngcontent-%COMP%], .country-input[_ngcontent-%COMP%]{width:30%;margin-top:5px!important;margin-right:10px;display:inline-block}.price-show[_ngcontent-%COMP%]{direction:rtl;text-align:left;float:right;margin-right:10%;margin-top:12px;margin-bottom:0}label[_ngcontent-%COMP%]{position:relative}label.important[_ngcontent-%COMP%]:after{position:absolute;top:0;right:-13px;content:"*";color:red;font-size:19px}',".buttons-group[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-left:15px;font-size:small}td[_ngcontent-%COMP%]{font-size:small}td[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin:5px;font-size:small!important}.image-product[_ngcontent-%COMP%]{width:90px!important;height:92px!important;border-radius:11px;margin:5px;padding:4px}td[_ngcontent-%COMP%]   .image-product[_ngcontent-%COMP%]:hover{position:relative;z-index:2;transform:scale(2.5)}.drop-container[_ngcontent-%COMP%]{display:flex;gap:10px;flex-direction:column;justify-content:center;align-items:center;height:100px;padding:20px;border-radius:10px;border:2px dashed #b5a654;color:#444;cursor:pointer;transition:background .2s ease-in-out,border .2s ease-in-out;width:100%;position:relative;z-index:1}.drop-container[_ngcontent-%COMP%]:hover{background:#eee;border-color:#111}.drop-container[_ngcontent-%COMP%]:hover   .drop-title[_ngcontent-%COMP%]{color:#222}.drop-title[_ngcontent-%COMP%]{color:#444;font-size:20px;font-weight:700;text-align:center;transition:color .2s ease-in-out}.file-upload[_ngcontent-%COMP%]{opacity:0;position:absolute;top:0;left:0;width:100%;height:100%;z-index:2}.loading-text[_ngcontent-%COMP%]{font-size:16px;text-transform:capitalize;display:block;margin-top:12px;margin-bottom:0;text-align:center;color:#daa520;animation-name:_ngcontent-%COMP%_loading;animation-iteration-count:infinite;animation-duration:2.5s;animation-timing-function:ease-out}.spinner-grow[_ngcontent-%COMP%]{--bs-spinner-width: 15px;--bs-spinner-height: 15px;--bs-spinner-animation-speed: 1s;margin-right:5px}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%], option[_ngcontent-%COMP%], textarea[_ngcontent-%COMP%]{cursor:pointer}.form-group[_ngcontent-%COMP%]{position:relative;margin-bottom:15px}.inputs-group[_ngcontent-%COMP%] > input.form-control[_ngcontent-%COMP%], .inputs-group[_ngcontent-%COMP%] > textarea.form-control[_ngcontent-%COMP%]{margin-top:17px}.inputs-group[_ngcontent-%COMP%]:first-of-type > input.form-control[_ngcontent-%COMP%], .inputs-group[_ngcontent-%COMP%]:first-of-type > textarea.form-control[_ngcontent-%COMP%]{margin-top:5px}.delete-image[_ngcontent-%COMP%]{position:absolute;top:-5px;right:5px;z-index:3;cursor:pointer}label[_ngcontent-%COMP%]{font-size:smaller;font-weight:500;text-transform:capitalize}.remove-form-item[_ngcontent-%COMP%]{position:absolute;top:34%;right:-24px;padding:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center}.add-form-item[_ngcontent-%COMP%]{padding:0;height:20px;width:20px;display:inline-flex;justify-content:center;align-items:center;margin-left:20px}@keyframes _ngcontent-%COMP%_loading{0%{opacity:1}25%{opacity:0}50%{opacity:1}750%{opacity:0}}",".example-list[_ngcontent-%COMP%]{width:-moz-fit-content;width:fit-content;max-width:100%;display:flex;flex-direction:row;background:white;border-radius:4px;overflow:hidden;margin:5px;overflow-x:auto}.example-box[_ngcontent-%COMP%]{padding:6px 7px;border-right:solid 1px #ccc;color:#000000de;display:flex;flex-direction:row;align-items:center;justify-content:space-between;box-sizing:border-box;cursor:move;background:white;font-size:14px;flex-grow:1;flex-basis:0;margin:5px;position:relative}.cdk-drag-preview[_ngcontent-%COMP%]{box-sizing:border-box;border-radius:4px;box-shadow:0 5px 5px -3px #0003,0 8px 10px 1px #00000024,0 3px 14px 2px #0000001f}.cdk-drag-placeholder[_ngcontent-%COMP%]{opacity:0}.cdk-drag-animating[_ngcontent-%COMP%]{transition:transform .25s cubic-bezier(0,0,.2,1)}.example-box[_ngcontent-%COMP%]:last-child{border:none}.example-list.cdk-drop-list-dragging[_ngcontent-%COMP%]   .example-box[_ngcontent-%COMP%]:not(.cdk-drag-placeholder){transition:transform .25s cubic-bezier(0,0,.2,1)}"]})}return o})()}];let X=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[_.Bz.forChild($),_.Bz]})}return o})(),W=(()=>{class o{static#t=this.\u0275fac=function(n){return new(n||o)};static#e=this.\u0275mod=t.oAB({type:o});static#o=this.\u0275inj=t.cJS({imports:[p.ez,X,a.u5,a.UX,g.JX]})}return o})()}}]);